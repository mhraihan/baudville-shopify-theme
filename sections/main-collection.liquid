{% assign limit = 8 %}
<div class="container pt-0">
  {% if collection.image %}
    <div class="pb-10">
      <img src="{{ collection.image | image_url }}" alt="" loading="true">
    </div>
  {% endif %}
  <h1 class="mb-6 text-2xl font-bold text-center md:text-3xl md:mb-16">
    {{ collection.title }}
  </h1>

  {% if collection.description != blank %}
    <div class="block overflow mx-auto mb-6 md:-mt-6 md:mb-12">
      {{ collection.description }}
    </div>
  {% endif %}

  {% paginate collection.products by limit %}
    {% if collection and collection.products %}
      {% assign amount = collection.all_products_count %}
      {% render 'layout-sort-bar', amount: amount class: 'mb-8' %}
      <div class="product-result-controls flex items-center justify-between text-gray-100 mb-3">
        <h2 class="product-result-controls__category-name text-xl">
          {{ collection.metafields.custom.subtitle | default: collection.title }}
        </h2>
        <div class="hidden sm:inline-block">
          {{ amount }} {{ amount | pluralize: 'Item', 'Items' }}
        </div>
      </div>
      <div class="collection-products grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-6">
        {% for product in collection.products %}
          {% render 'product-card', product_card: product, index: forloop.index %}
        {% endfor %}
      </div>
    {% else %}
      <div>
        {{ 'common.no_products' | t }}
      </div>
    {% endif %}


    {%- comment -%}
      {% render 'layout-pagination', paginate: paginate %}
    {%- endcomment -%}
    <renderless-pagination-products :pages="{{ paginate.pages }}" :current="{{ paginate.current_page }}" :limit="{{ limit }}" :handle="'{{ collection.handle }}'" :target="'.collection-products'" :url="'{{  collection.url }}'" v-slot="{ loadMore, text, show }">
      <div v-if="show.value" class="pagination flex items-center justify-center">
        <button v-if="text" @click="loadMore" class="button uppercase px-10 py-5 tracking-widest font-bn mt-6" v-html="text.value"></button>
      </div>
    </renderless-pagination-products>
  {% endpaginate %}
</div>

{% stylesheet %}
  .product-summary:nth-child(n + 9) .trustpilot-widget {
    display: none;
  }
{% endstylesheet %}